# Лабораторная работа 7 — «TaskManager»

## Введение и цель
Цель: приобрести навыки создания взаимодействующего desktop-клиента (Windows Forms) и веб/REST-сервера (ASP.NET Core Web API), а также реализации фонового сервиса (IHostedService) на сервере.

**Важно:** WinForms и WPF требуют Windows для полного функционала; при использовании Linux/macOS следует развернуть виртуальную машину и запускать приложение на ней.

## Краткое задание
Разработать систему **TaskManager**:
- Сервер: ASP.NET Core Web API (EF Core + SQLite) с CRUD для `TaskItem`, поиском и endpoint'ом экспорта в JSON.
- Клиент: Windows Forms приложение, которое использует Web API (HttpClient) для получения и создания задач; простой веб-интерфейс.
- На сервере реализовать BackgroundService, который периодически (настраиваемо) экспортирует `tasks_export.json` и пишет лог.

Модель данных:
```csharp
public class TaskItem {
  public int Id { get; set; }
  public string Title { get; set; }
  public string Description { get; set; }
  public DateTime DueDate { get; set; }
  public bool IsDone { get; set; }
}
```

## Задания

### Задание 1
1. Создать ASP.NET Core Web API проект с контроллером `TasksController` и CRUD-эндпоинтами (GET list, GET/{id}, POST, PUT, DELETE).
2. Сделать Windows Forms приложение с формой, содержащей DataGridView для отображения задач и кнопку "Добавить" (вызов POST к API). Используйте `HttpClient` и async/await.
3. Написать .bat-файлы и README с инструкцией запуска сервера и клиента.

**Требования:** корректная обработка ошибок, параметризуемый URL сервера в настройках WinForms, использование JSON для передачи данных.

### Задание 2
1. Добавить в веб-сервер MVC-страницу или отдельное Razor приложение (можно под одним хостом) для просмотра/редактирования задач. Серверная валидация моделей и отображение ошибок обязательны.
2. Реализовать endpoint `GET /api/tasks/export` — возвращает весь массив задач и/или записывает `tasks_export.json` на диск.
3. Обеспечить серверную валидацию при создании/обновлении задачи; при ошибках вернуть код и описание ошибки.


### Задание 3*
1. Реализовать `BackgroundService`, который каждые N секунд/минут экспортирует список задач в `tasks_export.json` и логирует количество экспортированных задач через `ILogger` (в файл или консоль).
2. Добавить endpoint поиска `/api/tasks/search?q=...&page=...&size=...` с пагинацией.
3. Обеспечить корректное завершение BackgroundService при остановке приложения.

**Требования:** использование DI для службы, конфигурируемый интервал через appsettings.json, аккуратное логирование.
